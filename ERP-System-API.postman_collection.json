{
  "info": {
    "name": "ERP System API",
    "description": "Complete API documentation for ERP Multi-tenant System with Superadmin",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "12345"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "master_key",
      "value": "MASTER_SUPER_ADMIN_KEY_2024",
      "type": "string"
    },
    {
      "key": "master_email",
      "value": "master@erp.com",
      "type": "string"
    },
    {
      "key": "master_password",
      "value": "MasterAdmin123!",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "1. Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set(\"token\", jsonData.access_token);",
                  "    pm.collectionVariables.set(\"token\", jsonData.access_token);",
                  "    ",
                  "    // Show user info",
                  "    console.log(\"‚úÖ Login successful!\");",
                  "    console.log(\"üìß Email:\", jsonData.user.email);",
                  "    console.log(\"üë§ Role:\", jsonData.user.role);",
                  "    console.log(\"üîë Token saved to collection variables\");",
                  "    ",
                  "    if (jsonData.user.isSuperAdminMaster) {",
                  "        console.log(\"\\nüéñÔ∏è  SUPERADMIN MASTER - Full access to staff management!\");",
                  "    } else if (jsonData.user.isSuperAdmin) {",
                  "        console.log(\"\\n‚≠ê SUPERADMIN STAFF - Cannot access staff management\");",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{master_email}}\",\n  \"password\": \"{{master_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "**üîê STEP 2: Login untuk semua role**\n\n**Default (using variables):**\n- Email: `{{master_email}}` (master@erp.com)\n- Password: `{{master_password}}` (MasterAdmin123!)\n\n**Other roles (manual):**\n- Superadmin Staff: staff@erp.com / Staff123!\n- Admin: admin@demo.com / Admin123!\n\n**Response includes:**\n```json\n{\n  \"access_token\": \"eyJhbG...\",\n  \"user\": {\n    \"role\": \"superadmin-master\",\n    \"isSuperAdminMaster\": true\n  }\n}\n```\n\n**Token auto-saved** to collection variable `{{token}}`\n\n**After login:**\n- ‚úÖ Token ready for all requests\n- üîê Check Console for role confirmation\n- ‚è≠Ô∏è  Can now access protected endpoints"
          },
          "response": []
        },
        {
          "name": "2. Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@company.com\",\n  \"password\": \"Password123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"companyId\": \"put-company-uuid-here\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            },
            "description": "Register user baru untuk company"
          },
          "response": []
        },
        {
          "name": "3. Register Superadmin Master (First Time)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Optional: Save user info after registration",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"‚úÖ Superadmin Master registered:\", jsonData.user.email);",
                  "    console.log(\"‚ö†Ô∏è  Next: Use Login endpoint to get token\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{master_email}}\",\n  \"password\": \"{{master_password}}\",\n  \"firstName\": \"Master\",\n  \"lastName\": \"Admin\",\n  \"masterKey\": \"{{master_key}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register-superadmin",
              "host": ["{{base_url}}"],
              "path": ["auth", "register-superadmin"]
            },
            "description": "**üîë STEP 1: First-time registration for Superadmin Master**\n\nThis endpoint creates the first `superadmin-master` account. Requires master key for security.\n\n**Variables Used:**\n- `{{master_email}}`: master@erp.com\n- `{{master_password}}`: MasterAdmin123!\n- `{{master_key}}`: MASTER_SUPER_ADMIN_KEY_2024\n\n**Master Key Source:** Set in collection variables (check .env file)\n\n**Role Created:** `superadmin-master`\n- ‚úÖ Full system control\n- ‚úÖ Can create/manage superadmin staff\n- ‚úÖ Can access all endpoints\n\n**After registration:**\n1. ‚úÖ Account created successfully\n2. ‚è≠Ô∏è  Next: Login with this account (use endpoint #1)\n3. üîê Use token to access staff management\n\n**‚ö†Ô∏è Important:**\n- Only do this ONCE for first master\n- Change credentials in production\n- Keep master key secure"
          },
          "response": []
        },
        {
          "name": "4. Get Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"\\nüë§ User Profile:\");",
                  "    console.log(\"üìß Email:\", jsonData.email);",
                  "    console.log(\"üëî Role:\", jsonData.role.name);",
                  "    console.log(\"‚úÖ Active:\", jsonData.isActive);",
                  "    ",
                  "    if (jsonData.role.name === 'superadmin-master') {",
                  "        console.log(\"\\nüéñÔ∏è  MASTER ACCESS:\");",
                  "        console.log(\"   ‚úÖ Can create superadmin staff\");",
                  "        console.log(\"   ‚úÖ Can access /superadmin/staff endpoints\");",
                  "    } else if (jsonData.role.name === 'superadmin-staff') {",
                  "        console.log(\"\\n‚≠ê STAFF ACCESS:\");",
                  "        console.log(\"   ‚úÖ Full system access\");",
                  "        console.log(\"   ‚ùå Cannot access /superadmin/staff endpoints\");",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["auth", "profile"]
            },
            "description": "**üîç Check user profile and role**\n\nUse this to verify:\n- Current role (superadmin-master vs superadmin-staff)\n- User details\n- Active status\n\n**Response example:**\n```json\n{\n  \"id\": \"uuid\",\n  \"email\": \"master@erp.com\",\n  \"firstName\": \"Master\",\n  \"role\": {\n    \"name\": \"superadmin-master\"\n  },\n  \"isActive\": true\n}\n```\n\n**Role Check:**\n- `superadmin-master` ‚úÖ Can access staff management\n- `superadmin-staff` ‚ùå Cannot access staff management\n\n**Troubleshooting 403 Error:**\nIf you get 403 on `/superadmin/staff`, check role here!"
          },
          "response": []
        },
        {
          "name": "5. Get Current User (JWT Payload)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            },
            "description": "Get JWT payload user"
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints for login, register, and profile management.\n\n**Role Hierarchy:**\n1. `superadmin-master`: First superadmin, full control, can manage staff\n2. `superadmin-staff`: Full system access, cannot create accounts\n3. `admin`: Company admin\n4. `manager`: Company manager\n5. `staff`: Company staff\n\n**Getting Started:**\n1. Register first superadmin-master using master key\n2. Login as superadmin-master\n3. Create superadmin-staff accounts via Staff Management endpoints"
    },
    {
      "name": "Superadmin - Companies",
      "item": [
        {
          "name": "Company Users",
          "item": [
            {
              "name": "1. Get Company Users",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/superadmin/companies/:companyId/users?page=1&limit=10",
                  "host": ["{{base_url}}"],
                  "path": ["superadmin", "companies", ":companyId", "users"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1",
                      "description": "Page number"
                    },
                    {
                      "key": "limit",
                      "value": "10",
                      "description": "Items per page"
                    },
                    {
                      "key": "search",
                      "value": "john",
                      "disabled": true,
                      "description": "Search by email/firstName/lastName"
                    }
                  ],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "company-uuid-here",
                      "description": "Company ID"
                    }
                  ]
                },
                "description": "List users that belong to a specific company (pagination + optional search)."
              },
              "response": []
            },
            {
              "name": "2. Create Company User",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"user1@company.com\",\n  \"firstName\": \"User\",\n  \"lastName\": \"Company\",\n  \"phone\": \"+628123456789\",\n  \"country\": \"Indonesia\",\n  \"address\": \"Jl. Sudirman No. 1\",\n  \"city\": \"Jakarta\",\n  \"postalCode\": \"10110\",\n  \"roleName\": \"staff\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/superadmin/companies/:companyId/users",
                  "host": ["{{base_url}}"],
                  "path": ["superadmin", "companies", ":companyId", "users"],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "company-uuid-here",
                      "description": "Company ID"
                    }
                  ]
                },
                "description": "Create a new user under a specific company.\n\nNotes:\n- password is optional; if omitted backend uses default \"admin123\"\n- roleName must be existing role (e.g. admin/manager/staff)\n- cannot assign superadmin roles"
              },
              "response": []
            },
            {
              "name": "3. Get Company User By ID",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/superadmin/companies/:companyId/users/:userId",
                  "host": ["{{base_url}}"],
                  "path": ["superadmin", "companies", ":companyId", "users", ":userId"],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "company-uuid-here",
                      "description": "Company ID"
                    },
                    {
                      "key": "userId",
                      "value": "user-uuid-here",
                      "description": "Company User ID"
                    }
                  ]
                },
                "description": "Get a single company user by ID (must belong to the specified company)."
              },
              "response": []
            },
            {
              "name": "4. Update Company User",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"User\",\n  \"email\": \"updated-user1@company.com\",\n  \"phone\": \"+628987654321\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/superadmin/companies/:companyId/users/:userId",
                  "host": ["{{base_url}}"],
                  "path": ["superadmin", "companies", ":companyId", "users", ":userId"],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "company-uuid-here",
                      "description": "Company ID"
                    },
                    {
                      "key": "userId",
                      "value": "user-uuid-here",
                      "description": "Company User ID"
                    }
                  ]
                },
                "description": "Update company user (partial).\n\nNotes:\n- if updating email, must be globally unique\n- roleName can be updated but cannot be superadmin roles\n- password can be updated (min 8)"
              },
              "response": []
            },
            {
              "name": "5. Delete Company User",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/superadmin/companies/:companyId/users/:userId",
                  "host": ["{{base_url}}"],
                  "path": ["superadmin", "companies", ":companyId", "users", ":userId"],
                  "variable": [
                    {
                      "key": "companyId",
                      "value": "company-uuid-here",
                      "description": "Company ID"
                    },
                    {
                      "key": "userId",
                      "value": "user-uuid-here",
                      "description": "Company User ID"
                    }
                  ]
                },
                "description": "Delete a company user (must belong to the company)."
              },
              "response": []
            }
          ],
          "description": "Manage users registered under a specific company.\n\nBase: /superadmin/companies/:companyId/users\n\nAll endpoints require Superadmin auth (Bearer {{token}})."
        },
        {
          "name": "1. Create Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "PT Technology Indonesia",
                  "type": "text",
                  "description": "Company name (required)"
                },
                {
                  "key": "email",
                  "value": "contact@techindo.com",
                  "type": "text",
                  "description": "Company email (optional)"
                },
                {
                  "key": "phone",
                  "value": "+628123456789",
                  "type": "text",
                  "description": "Company phone (optional)"
                },
                {
                  "key": "address",
                  "value": "Jl. Sudirman No. 123, Jakarta Pusat",
                  "type": "text",
                  "description": "Company address (optional)"
                },
                {
                  "key": "website",
                  "value": "https://techindo.com",
                  "type": "text",
                  "description": "Company website (optional)"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "type": "text",
                  "description": "Company status: ACTIVE, TRIAL, SUSPENDED, INACTIVE (optional, default: TRIAL)"
                },
                {
                  "key": "logo",
                  "type": "file",
                  "description": "Company logo - PNG/JPEG only, max 1MB (optional)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/superadmin/companies",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "companies"]
            },
            "description": "Create new company with optional logo upload.\n\n**Logo Requirements:**\n- Format: JPEG, PNG only\n- Max Size: 1MB (1048576 bytes)\n- Recommended: 200x200 - 500x500 px, square (1:1)\n- Optional field\n\n**Response will include logo URL** if uploaded:\n```json\n{\n  \"id\": \"uuid\",\n  \"name\": \"PT Technology Indonesia\",\n  \"logo\": \"http://localhost:3000/uploads/logos/logo-1703151234567-987654321.png\",\n  ...\n}\n```"
          },
          "response": []
        },
        {
          "name": "2. Get All Companies",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/companies?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "companies"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "search",
                  "value": "demo",
                  "disabled": true,
                  "description": "Search by name or email"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "disabled": true,
                  "description": "Filter by status"
                }
              ]
            },
            "description": "List semua companies dengan pagination & filter"
          },
          "response": []
        },
        {
          "name": "3. Get Company Stats",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/companies/stats",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "companies", "stats"]
            },
            "description": "Get statistik companies (total, active, trial, etc)"
          },
          "response": []
        },
        {
          "name": "4. Get Single Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/companies/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "companies", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "company-uuid-here",
                  "description": "Company ID"
                }
              ]
            },
            "description": "Detail company by ID dengan users & subscription"
          },
          "response": []
        },
        {
          "name": "5. Update Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "name",
                  "value": "PT Technology Indonesia (Updated)",
                  "type": "text",
                  "description": "Company name (optional)",
                  "disabled": true
                },
                {
                  "key": "email",
                  "value": "newemail@techindo.com",
                  "type": "text",
                  "description": "Company email (optional)",
                  "disabled": true
                },
                {
                  "key": "phone",
                  "value": "+628987654321",
                  "type": "text",
                  "description": "Company phone (optional)",
                  "disabled": true
                },
                {
                  "key": "address",
                  "value": "Jl. New Address 456",
                  "type": "text",
                  "description": "Company address (optional)",
                  "disabled": true
                },
                {
                  "key": "website",
                  "value": "https://newtechindo.com",
                  "type": "text",
                  "description": "Company website (optional)",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "type": "text",
                  "description": "Company status: ACTIVE, TRIAL, SUSPENDED, INACTIVE (optional)"
                },
                {
                  "key": "logo",
                  "type": "file",
                  "description": "New company logo - old logo will be deleted automatically (optional)",
                  "disabled": true
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/superadmin/companies/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "companies", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "company-uuid-here",
                  "description": "Company ID"
                }
              ]
            },
            "description": "Update company data (partial update). All fields are optional.\n\n**Email Update:**\n- Email must be unique across all companies\n- Returns 409 Conflict if email already used by another company\n- Validation skips current company when checking uniqueness\n\n**Logo Update:**\n- Upload new logo to replace existing one\n- Old logo file will be automatically deleted\n- Leave logo field disabled if you don't want to change it\n- Format: JPEG, PNG only\n- Max Size: 1MB\n\n**Note:** Enable/disable fields as needed for your update."
          },
          "response": []
        },
        {
          "name": "6. Delete Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/companies/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "companies", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "company-uuid-here",
                  "description": "Company ID"
                }
              ]
            },
            "description": "Delete company permanently.\n\n**Note:** Logo file will be automatically deleted from server when company is deleted."
          },
          "response": []
        }
      ],
      "description": "Company management endpoints for superadmin.\n\n**Logo Upload Feature:**\n- Create & Update company now support logo upload\n- Format: JPEG, PNG only\n- Max Size: 1MB (1048576 bytes)\n- Recommended: 200x200 - 500x500 px, square (1:1)\n- Storage: Uploaded files stored in `uploads/logos/`\n- Access: Logo URL returned in response, accessible via HTTP\n- Auto-cleanup: Old logos deleted on update/delete\n\n**Example Logo URL:**\n```\nhttp://localhost:3000/uploads/logos/logo-1703151234567-987654321.png\n```",
      "auth": {
        "type": "bearer",
        "bearer": [
          {
            "key": "token",
            "value": "{{token}}",
            "type": "string"
          }
        ]
      }
    },
    {
      "name": "Superadmin - Staff Management",
      "item": [
        {
          "name": "1. Create Superadmin Staff",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"\\n‚úÖ Staff Created Successfully!\");",
                  "    console.log(\"üìß Email:\", jsonData.email);",
                  "    console.log(\"üë§ Name:\", jsonData.firstName, jsonData.lastName);",
                  "    console.log(\"üé≠ Role:\", jsonData.role.name);",
                  "    console.log(\"üÜî ID:\", jsonData.id);",
                  "} else if (pm.response.code === 403) {",
                  "    console.log(\"\\n‚ùå ACCESS DENIED!\");",
                  "    console.log(\"Only superadmin-master can create staff.\");",
                  "    console.log(\"\\nüí° Solution:\");",
                  "    console.log(\"1. Register as master using 'Register Superadmin Master'\");",
                  "    console.log(\"2. Login with master account\");",
                  "    console.log(\"3. Check role in 'Get Profile'\");",
                  "} else if (pm.response.code === 409) {",
                  "    console.log(\"\\n‚ö†Ô∏è  Email already exists!\");",
                  "    console.log(\"Try different email address.\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"staff1@erp.com\",\n  \"firstName\": \"Staff\",\n  \"lastName\": \"One\",\n  \"phone\": \"+628123456789\",\n  \"country\": \"Indonesia\",\n  \"address\": \"Jl. Sudirman No. 123\",\n  \"city\": \"Jakarta\",\n  \"postalCode\": \"12345\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/staff",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff"]
            },
            "description": "Create new superadmin staff account. **Only accessible by superadmin-master**.\n\nThe created staff will have role `superadmin-staff` with full system access but cannot create other superadmin accounts.\n\n**Default Password:**\n- Password automatically set to: `admin123`\n- Staff can change password after first login\n- No need to provide password in request\n\n**Required fields:**\n- email\n- firstName\n- lastName\n\n**Optional fields:**\n- password (if not provided, defaults to \"admin123\")\n- phone\n- country\n- address\n- city\n- postalCode\n- avatar"
          },
          "response": []
        },
        {
          "name": "1b. Create Staff with Avatar (form-data)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "email",
                  "value": "staff10@erp.com",
                  "type": "text"
                },
                {
                  "key": "firstName",
                  "value": "Staff",
                  "type": "text"
                },
                {
                  "key": "lastName",
                  "value": "Ten",
                  "type": "text"
                },
                {
                  "key": "phone",
                  "value": "+628123456789",
                  "type": "text"
                },
                {
                  "key": "country",
                  "value": "Indonesia",
                  "type": "text"
                },
                {
                  "key": "address",
                  "value": "Jl. Sudirman No. 123",
                  "type": "text"
                },
                {
                  "key": "city",
                  "value": "Jakarta",
                  "type": "text"
                },
                {
                  "key": "postalCode",
                  "value": "12345",
                  "type": "text"
                },
                {
                  "key": "avatar",
                  "type": "file",
                  "src": [],
                  "description": "Upload image file (JPG, PNG, GIF, WEBP) - Max 5MB before compression"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/superadmin/staff",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff"]
            },
            "description": "**Create staff with avatar photo upload**\n\n‚úÖ **Features:**\n- Default password: `admin123` (no need to provide)\n- Automatic image compression (max 500x500px)\n- Convert to JPEG format with 85% quality\n- Reduces file size significantly\n- High quality result\n\nüîê **Default Password:**\n- Automatically set to: `admin123`\n- Staff can change password after login\n- Optional: Can provide custom password in form-data\n\nüì∏ **Avatar Upload:**\n- Supported formats: JPG, JPEG, PNG, GIF, WEBP\n- Max size before compression: 5MB\n- After compression: ~50-200KB (depends on image)\n- Output: 500x500px max (maintains aspect ratio)\n\n**How to use:**\n1. Click on \"avatar\" field\n2. Click \"Select Files\"\n3. Choose an image file\n4. Send request\n\n**Note:** Avatar is optional. You can use regular JSON request if no photo needed."
          },
          "response": []
        },
        {
          "name": "2. Get All Superadmin Staff",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/staff?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "search",
                  "value": "staff",
                  "disabled": true,
                  "description": "Search by email, first name, or last name"
                }
              ]
            },
            "description": "List all superadmin staff with pagination. **Only accessible by superadmin-master**."
          },
          "response": []
        },
        {
          "name": "3. Get Staff Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/staff/stats",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff", "stats"]
            },
            "description": "Get statistics about superadmin staff (total, active, inactive). **Only accessible by superadmin-master**."
          },
          "response": []
        },
        {
          "name": "4. Get Staff by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/staff/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "staff-uuid-here",
                  "description": "Staff User ID"
                }
              ]
            },
            "description": "Get superadmin staff details by ID. **Only accessible by superadmin-master**."
          },
          "response": []
        },
        {
          "name": "5. Update Staff",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"updatedemail@example.com\",\n  \"firstName\": \"Updated Staff\",\n  \"lastName\": \"Name\",\n  \"phone\": \"+628987654321\",\n  \"country\": \"Indonesia\",\n  \"address\": \"Jl. Updated Address No. 99\",\n  \"city\": \"Jakarta\",\n  \"postalCode\": \"12345\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/staff/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "staff-uuid-here",
                  "description": "Staff User ID"
                }
              ]
            },
            "description": "Update superadmin staff information. **Only accessible by superadmin-master**.\n\n**Updatable fields:**\n- email (with uniqueness validation)\n- firstName\n- lastName\n- phone\n- country\n- address\n- city\n- postalCode\n- isActive\n- password (optional)\n\n**Validation:**\n- Email must be unique (409 Conflict if already used)\n- Cannot update superadmin-master accounts\n\n**Cannot update:**\n- role (always superadmin-staff)"
          },
          "response": []
        },
        {
          "name": "5b. Update Staff with Avatar (form-data)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "email",
                  "value": "updatedemail@example.com",
                  "type": "text",
                  "description": "New email (must be unique)"
                },
                {
                  "key": "firstName",
                  "value": "Updated",
                  "type": "text"
                },
                {
                  "key": "lastName",
                  "value": "Name",
                  "type": "text"
                },
                {
                  "key": "phone",
                  "value": "+628987654321",
                  "type": "text"
                },
                {
                  "key": "country",
                  "value": "Indonesia",
                  "type": "text"
                },
                {
                  "key": "address",
                  "value": "Jl. Updated Address",
                  "type": "text"
                },
                {
                  "key": "city",
                  "value": "Jakarta",
                  "type": "text"
                },
                {
                  "key": "postalCode",
                  "value": "12345",
                  "type": "text"
                },
                {
                  "key": "avatar",
                  "type": "file",
                  "src": [],
                  "description": "Upload new avatar (optional)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/superadmin/staff/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "staff-uuid-here",
                  "description": "Staff User ID"
                }
              ]
            },
            "description": "**Update staff with new avatar photo**\n\n‚úÖ **Features:**\n- Update email (with uniqueness validation)\n- Upload new avatar (old avatar deleted automatically)\n- Automatic compression\n- All fields optional\n\nüì∏ **Avatar Upload:**\n- Supported formats: JPG, JPEG, PNG, GIF, WEBP\n- Max size: 5MB before compression\n- Output: 500x500px max, JPEG 85% quality\n\n‚ö†Ô∏è **Email Validation:**\n- Email must be unique\n- Returns 409 Conflict if email already used\n\n**Note:** If you don't upload new avatar, existing avatar remains unchanged."
          },
          "response": []
        },
        {
          "name": "6. Delete Staff",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/staff/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "staff-uuid-here",
                  "description": "Staff User ID"
                }
              ]
            },
            "description": "Delete superadmin staff account. **Only accessible by superadmin-master**.\n\nCannot delete superadmin-master accounts."
          },
          "response": []
        },
        {
          "name": "7. Bulk Delete Staff",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ids\": [\n    \"staff-uuid-1\",\n    \"staff-uuid-2\",\n    \"staff-uuid-3\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/staff/bulk-delete",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "staff", "bulk-delete"]
            },
            "description": "**Delete multiple staff accounts at once**\n\n‚úÖ **Features:**\n- Delete up to multiple users in single request\n- Automatic avatar cleanup for all deleted users\n- Transaction-based (all or nothing)\n- Protected against deleting superadmin-master\n\n**Request Body:**\n```json\n{\n  \"ids\": [\"uuid-1\", \"uuid-2\", \"uuid-3\"]\n}\n```\n\n**Validation:**\n- At least 1 ID required\n- All IDs must be valid UUIDs\n- Cannot delete superadmin-master accounts\n- Returns error if any ID is superadmin-master\n\n**Response:**\n```json\n{\n  \"message\": \"Successfully deleted 3 user(s)\",\n  \"deletedCount\": 3,\n  \"requestedIds\": 3\n}\n```\n\n**Error Cases:**\n- 404: No users found with provided IDs\n- 400: List contains superadmin-master account(s)\n- 400: IDs array is empty\n- 401: Not authenticated\n- 403: Not superadmin-master role"
          },
          "response": []
        }
      ],
      "description": "Superadmin Staff Management endpoints. **Only accessible by superadmin-master role**.\n\n**Role Hierarchy:**\n- `superadmin-master`: Full control, can manage staff\n- `superadmin-staff`: Full system access, cannot manage staff\n\n**Permissions:**\n- Create staff: Master only\n- Update staff: Master only\n- Delete staff: Master only\n- Staff cannot create other accounts"
    },
    {
      "name": "Superadmin - Pricing Plans",
      "item": [
        {
          "name": "1. Create Pricing Plan",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium\",\n  \"description\": \"Premium plan for enterprise\",\n  \"monthlyPrice\": 200000,\n  \"yearlyPrice\": 1500000,\n  \"monthlyDiscount\": 10,\n  \"yearlyDiscount\": 37.5,\n  \"discountType\": \"PERCENTAGE\",\n  \"features\": [\n    \"Unlimited users\",\n    \"Unlimited projects\",\n    \"1TB storage\",\n    \"24/7 Priority support\",\n    \"Custom integrations\"\n  ],\n  \"maxUsers\": 999,\n  \"maxProjects\": 9999,\n  \"maxStorage\": 1000,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/pricing-plans",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "pricing-plans"]
            },
            "description": "Buat pricing plan baru.\n\n**Struktur Harga:**\n- `monthlyPrice`: Harga per bulan (misal: 200000)\n- `yearlyPrice`: Harga per tahun (misal: 2400000 atau 1500000 dengan diskon)\n- `monthlyDiscount`: Diskon untuk monthly (optional)\n- `yearlyDiscount`: Diskon untuk yearly (optional)\n- `discountType`: PERCENTAGE (0-100) atau FIXED (nominal)\n\n**Contoh:**\n- Monthly: Rp 200.000, diskon 10% ‚Üí Final: Rp 180.000\n- Yearly: Rp 2.400.000 (12 √ó 200k), diskon 37.5% ‚Üí Final: Rp 1.500.000\n\n**Response akan include:**\n- `finalMonthlyPrice`: Harga final setelah diskon monthly\n- `finalYearlyPrice`: Harga final setelah diskon yearly"
          },
          "response": []
        },
        {
          "name": "2. Get All Pricing Plans",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/pricing-plans?includeInactive=false",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "pricing-plans"],
              "query": [
                {
                  "key": "includeInactive",
                  "value": "false",
                  "description": "Include inactive plans"
                }
              ]
            },
            "description": "List semua pricing plans"
          },
          "response": []
        },
        {
          "name": "3. Get Single Pricing Plan",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/pricing-plans/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "pricing-plans", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "plan-uuid-here",
                  "description": "Pricing Plan ID"
                }
              ]
            },
            "description": "Detail pricing plan by ID"
          },
          "response": []
        },
        {
          "name": "4. Update Pricing Plan",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"monthlyPrice\": 180000,\n  \"yearlyPrice\": 1400000,\n  \"monthlyDiscount\": 0,\n  \"yearlyDiscount\": 35,\n  \"discountType\": \"PERCENTAGE\",\n  \"maxUsers\": 25\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/pricing-plans/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "pricing-plans", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "plan-uuid-here",
                  "description": "Pricing Plan ID"
                }
              ]
            },
            "description": "Update pricing plan (partial update)"
          },
          "response": []
        },
        {
          "name": "5. Delete Pricing Plan",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/pricing-plans/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "pricing-plans", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "plan-uuid-here",
                  "description": "Pricing Plan ID"
                }
              ]
            },
            "description": "Hapus pricing plan"
          },
          "response": []
        }
      ],
      "description": "Pricing plan management untuk superadmin"
    },
    {
      "name": "Superadmin - Subscriptions",
      "item": [
        {
          "name": "1. Create Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planId\": \"plan-uuid-here\",\n  \"companyId\": \"company-uuid-here\",\n  \"billingPeriod\": \"MONTHLY\",\n  \"autoRenew\": true,\n  \"startDate\": \"2025-01-01T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions"]
            },
            "description": "**Buat subscription baru untuk company**\n\n**üîÑ UPDATED - Payment Flow:**\nSubscription dibuat dengan status **PENDING** (menunggu pembayaran).\n\n**Flow:**\n1. ‚úÖ Create Subscription ‚Üí Status: PENDING\n2. üí≥ Create Payment ‚Üí Generate payment record\n3. ‚úÖ Process Payment ‚Üí Subscription status ‚Üí ACTIVE\n\n**Business Rules:**\n- ‚ùó 1 company hanya bisa punya 1 active/trial subscription\n- Subscription tidak langsung active, butuh payment dulu\n- Akan throw ConflictException jika company sudah punya active subscription\n\n**Billing Period:**\n- `MONTHLY`: Monthly billing dengan harga monthlyPrice dari plan\n- `YEARLY`: Yearly billing dengan harga yearlyPrice dari plan\n\n**Price Calculation:**\n- Sistem otomatis menghitung harga final berdasarkan:\n  - Plan's monthlyPrice/yearlyPrice\n  - Discount (monthlyDiscount/yearlyDiscount)\n  - DiscountType (PERCENTAGE atau FIXED)\n\n**Auto-calculated Fields:**\n- `price`: Final price setelah discount\n- `status`: PENDING (akan jadi ACTIVE setelah payment)\n- `endDate`: Tanggal berakhir subscription\n  - MONTHLY: startDate + 1 month (misal: 1 Jan ‚Üí 1 Feb, akses terakhir 1 Feb, putus 2 Feb)\n  - YEARLY: startDate + 1 year (misal: 1 Jan 2025 ‚Üí 1 Jan 2026, akses terakhir 1 Jan 2026)\n- `nextBillingAt`: Same as endDate (untuk renewal)\n\n**Example:**\nPlan: Rp 200.000/month, diskon 10%\n- MONTHLY ‚Üí price: Rp 180.000, berlangganan 1 Jan ‚Üí expire 1 Feb\n- YEARLY (Rp 2.160.000 - 10%) ‚Üí price: Rp 1.944.000, berlangganan 1 Jan ‚Üí expire 1 Jan tahun depan\n\n**‚ö†Ô∏è Important:**\nAkses terputus pada hari SETELAH endDate. Misal endDate 1 Feb, maka:\n- ‚úÖ 1 Feb: Masih bisa akses\n- ‚ùå 2 Feb: Sudah tidak bisa akses (expired)\n\n**üìå Next Step:**\nSetelah create subscription, lanjut ke **Superadmin - Payments** untuk create payment & process payment."
          },
          "response": []
        },
        {
          "name": "2. Get All Subscriptions",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions?page=1&limit=10&status=ACTIVE",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "Filter by status: TRIAL, ACTIVE, EXPIRED, CANCELLED (optional)"
                }
              ]
            },
            "description": "**List semua subscriptions dengan pagination**\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `status`: Filter by subscription status (optional)\n\n**Status Values:**\n- `TRIAL`: Trial period\n- `ACTIVE`: Active subscription\n- `EXPIRED`: Expired subscription\n- `CANCELLED`: Cancelled subscription\n\n**Response includes:**\n- Subscription details\n- Related plan details (name, monthly/yearly price)\n- Related company details (name, email)\n- Pagination metadata (total, page, limit, totalPages)"
          },
          "response": []
        },
        {
          "name": "3. Get Subscription by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "subscription-uuid-here",
                  "description": "Subscription ID"
                }
              ]
            },
            "description": "**Get detail subscription by ID**\n\n**Response includes:**\n- Complete subscription details\n- Related pricing plan (name, features, prices)\n- Related company (name, email, phone)\n- Billing information (price, period, dates)\n- Status and auto-renewal settings"
          },
          "response": []
        },
        {
          "name": "3b. Get Subscription by Company ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions/company/:companyId",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions", "company", ":companyId"],
              "variable": [
                {
                  "key": "companyId",
                  "value": "company-uuid-here",
                  "description": "Company ID"
                }
              ]
            },
            "description": "**Get subscription berdasarkan Company ID**\n\n**Use Case:**\n- Melihat subscription status dari halaman detail company\n- Check apakah company punya active subscription\n- Get billing information untuk specific company\n\n**Response includes:**\n- Company details (id, name, email, phone, status)\n- Subscription details (if exists)\n- Related pricing plan information\n- Billing period and price\n\n**Response if no subscription:**\n```json\n{\n  \"company\": {\n    \"id\": \"...\",\n    \"name\": \"Company Name\",\n    \"email\": \"company@email.com\"\n  },\n  \"subscription\": null,\n  \"message\": \"Company does not have an active subscription\"\n}\n```\n\n**Response if has subscription:**\n```json\n{\n  \"company\": {\n    \"id\": \"...\",\n    \"name\": \"Company Name\",\n    \"email\": \"company@email.com\"\n  },\n  \"subscription\": {\n    \"id\": \"...\",\n    \"planId\": \"...\",\n    \"billingPeriod\": \"MONTHLY\",\n    \"price\": 180000,\n    \"status\": \"ACTIVE\",\n    \"plan\": {\n      \"name\": \"Starter\",\n      \"monthlyPrice\": 200000,\n      \"features\": [...]\n    }\n  }\n}\n```"
          },
          "response": []
        },
        {
          "name": "4. Update Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"billingPeriod\": \"YEARLY\",\n  \"autoRenew\": false,\n  \"status\": \"ACTIVE\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "subscription-uuid-here",
                  "description": "Subscription ID"
                }
              ]
            },
            "description": "**Update subscription (partial update)**\n\n**Updatable Fields:**\n- `billingPeriod`: MONTHLY or YEARLY\n- `autoRenew`: true or false\n- `status`: TRIAL, ACTIVE, EXPIRED, CANCELLED\n- `startDate`: Change start date\n- `endDate`: Set end date (for manual expiry)\n\n**Smart Recalculation:**\n- Jika `billingPeriod` berubah:\n  - Price otomatis dihitung ulang dari plan\n  - nextBillingAt dihitung ulang (MONTHLY: +1 month, YEARLY: +1 year)\n\n**Example:**\nChange MONTHLY ‚Üí YEARLY:\n- Old: Rp 180.000/month\n- New: Rp 1.944.000/year (otomatis dihitung dari plan's yearlyPrice + discount)"
          },
          "response": []
        },
        {
          "name": "5. Cancel Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions/:id/cancel",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions", ":id", "cancel"],
              "variable": [
                {
                  "key": "id",
                  "value": "subscription-uuid-here",
                  "description": "Subscription ID"
                }
              ]
            },
            "description": "**Cancel subscription**\n\n**Actions performed:**\n- Status ‚Üí CANCELLED\n- autoRenew ‚Üí false\n- endDate ‚Üí current timestamp\n\n**Note:**\n- Company masih bisa akses sampai endDate\n- Tidak menghapus data subscription\n- Bisa di-reactivate dengan update status\n\n**Use Case:**\n- User request cancellation\n- Payment failure\n- Violation of terms"
          },
          "response": []
        },
        {
          "name": "6. Delete Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "subscription-uuid-here",
                  "description": "Subscription ID"
                }
              ]
            },
            "description": "**Hapus subscription permanently**\n\n**‚ö†Ô∏è WARNING:**\n- Permanent deletion\n- Removes company.subscriptionId reference\n- Cannot be undone\n\n**Before deleting:**\n- Consider cancelling instead of deleting\n- Backup subscription data if needed\n\n**Use Case:**\n- Test data cleanup\n- Incorrect subscription creation\n- Company account deletion"
          },
          "response": []
        },
        {
          "name": "7. Example - Create with Seeder Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planId\": \"{{planId}}\",\n  \"companyId\": \"{{companyId}}\",\n  \"billingPeriod\": \"YEARLY\",\n  \"autoRenew\": true,\n  \"startDate\": \"2025-01-01T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/subscriptions",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "subscriptions"]
            },
            "description": "**Example menggunakan data dari seeder**\n\n**Cara menggunakan:**\n1. Ambil planId dari GET /superadmin/pricing-plans\n2. Ambil companyId dari GET /superadmin/companies\n3. Set ke collection variables:\n   - `{{planId}}`: ID dari pricing plan (misal: Starter)\n   - `{{companyId}}`: ID dari company (misal: Demo Company)\n\n**Test Case - Starter Plan (YEARLY):**\n- Monthly Price: Rp 200.000\n- Yearly Price: Rp 2.160.000\n- Yearly Discount: 10%\n- **Final Price: Rp 1.944.000/year**\n\n**Expected Response:**\n```json\n{\n  \"id\": \"...\",\n  \"planId\": \"...\",\n  \"companyId\": \"...\",\n  \"billingPeriod\": \"YEARLY\",\n  \"price\": 1944000,\n  \"startDate\": \"2025-01-01T00:00:00.000Z\",\n  \"nextBillingAt\": \"2026-01-01T00:00:00.000Z\",\n  \"status\": \"ACTIVE\",\n  \"autoRenew\": true\n}\n```"
          },
          "response": []
        }
      ],
      "description": "**Subscription Management untuk Superadmin**\n\n**Business Rules:**\n- üîí 1 company = 1 active subscription only\n- üí∞ Price auto-calculated dari pricing plan + billing period + discount\n- üìÖ Next billing date auto-calculated\n- ‚ôªÔ∏è Support auto-renewal\n\n**Workflow:**\n1. Create subscription ‚Üí System validates no active subscription exists\n2. System calculates price from plan's monthly/yearly price + discount\n3. System calculates next billing date\n4. Company.subscriptionId updated\n\n**Key Features:**\n- Flexible billing (MONTHLY/YEARLY)\n- Automatic price calculation\n- Subscription lifecycle management\n- Conflict prevention (1 active subscription rule)\n- Cancellation support"
    },
    {
      "name": "Superadmin - Dashboard",
      "item": [
        {
          "name": "1. Get Dashboard Overview",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/dashboard/overview",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "dashboard", "overview"]
            },
            "description": "Overview statistik sistem (companies, users, revenue, dll)"
          },
          "response": []
        },
        {
          "name": "2. Get Company Growth",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/dashboard/company-growth?months=6",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "dashboard", "company-growth"],
              "query": [
                {
                  "key": "months",
                  "value": "6",
                  "description": "Number of months"
                }
              ]
            },
            "description": "Data pertumbuhan company per bulan"
          },
          "response": []
        },
        {
          "name": "3. Get Subscription Breakdown",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/dashboard/subscription-breakdown",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "dashboard", "subscription-breakdown"]
            },
            "description": "Breakdown subscription per pricing plan dengan revenue"
          },
          "response": []
        },
        {
          "name": "4. Get Company Status Distribution",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/dashboard/company-status",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "dashboard", "company-status"]
            },
            "description": "Distribusi company berdasarkan status (ACTIVE, TRIAL, SUSPENDED, INACTIVE)"
          },
          "response": []
        }
      ],
      "description": "Dashboard analytics untuk superadmin"
    },
    {
      "name": "Superadmin - Payments",
      "item": [
        {
          "name": "1. Create Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subscriptionId\": \"subscription-uuid-here\",\n  \"amount\": 180000,\n  \"paymentMethod\": \"Bank Transfer\",\n  \"paymentGateway\": \"Manual\",\n  \"notes\": \"Payment for monthly subscription\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/payments",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "payments"]
            },
            "description": "**Create payment untuk subscription**\n\n**Flow:**\n1. User pilih plan ‚Üí Create subscription (status: PENDING)\n2. Create payment ‚Üí Generate payment record (status: PENDING)\n3. Payment expires dalam 24 jam\n\n**Payment Methods:**\n- Bank Transfer\n- Credit Card\n- E-Wallet (GoPay, OVO, Dana, dll)\n- Virtual Account\n\n**Payment Status:**\n- PENDING: Menunggu pembayaran\n- PROCESSING: Sedang diproses\n- SUCCESS: Pembayaran berhasil\n- FAILED: Pembayaran gagal\n- EXPIRED: Pembayaran expired\n- CANCELLED: Pembayaran dibatalkan\n\n**Response:**\n```json\n{\n  \"id\": \"payment-uuid\",\n  \"subscriptionId\": \"...\",\n  \"amount\": 180000,\n  \"status\": \"PENDING\",\n  \"expiresAt\": \"2025-01-02T00:00:00.000Z\",\n  \"subscription\": {\n    \"id\": \"...\",\n    \"status\": \"PENDING\",\n    \"plan\": {...},\n    \"company\": {...}\n  }\n}\n```"
          },
          "response": []
        },
        {
          "name": "2. Process Payment (Mock Success)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"transactionId\": \"TRX-2025-001\",\n  \"notes\": \"Payment confirmed\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/superadmin/payments/:id/process",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "payments", ":id", "process"],
              "variable": [
                {
                  "key": "id",
                  "value": "payment-uuid-here",
                  "description": "Payment ID"
                }
              ]
            },
            "description": "**Mock payment success (simulasi payment gateway)**\n\n**‚ö†Ô∏è DEVELOPMENT ONLY:**\nEndpoint ini untuk simulasi payment gateway sebelum integrasi dengan Midtrans/Xendit.\n\n**What happens:**\n1. Payment status ‚Üí SUCCESS\n2. Set paidAt to current timestamp\n3. Generate transactionId (atau gunakan dari body)\n4. **Activate subscription** ‚Üí status PENDING ‚Üí ACTIVE\n5. Update lastPaymentAt di subscription\n\n**Production Flow (nanti):**\n- Payment gateway (Midtrans/Xendit) kirim webhook\n- Webhook handler verify signature\n- Update payment & subscription status\n\n**Response:**\n```json\n{\n  \"id\": \"payment-uuid\",\n  \"status\": \"SUCCESS\",\n  \"paidAt\": \"2025-01-01T10:00:00.000Z\",\n  \"transactionId\": \"TRX-2025-001\"\n}\n```\n\n**Subscription auto-activated!** ‚úÖ"
          },
          "response": []
        },
        {
          "name": "3. Get All Payments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/payments?page=1&limit=10&status=SUCCESS",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "payments"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "status",
                  "value": "SUCCESS",
                  "description": "Filter by status: PENDING, PROCESSING, SUCCESS, FAILED, EXPIRED, CANCELLED (optional)"
                },
                {
                  "key": "subscriptionId",
                  "value": "",
                  "description": "Filter by subscription ID (optional)",
                  "disabled": true
                }
              ]
            },
            "description": "**List semua payments dengan pagination & filters**\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `status`: Filter by payment status (optional)\n- `subscriptionId`: Filter by subscription (optional)\n\n**Response includes:**\n- Payment details\n- Related subscription info\n- Related plan & company\n- Pagination metadata"
          },
          "response": []
        },
        {
          "name": "4. Get Payment by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/payments/:id",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "payments", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "payment-uuid-here",
                  "description": "Payment ID"
                }
              ]
            },
            "description": "**Get detail payment by ID**\n\n**Response includes:**\n- Complete payment details\n- Transaction info\n- Payment method & gateway\n- Related subscription with plan & company\n- Payment proof (if uploaded)\n- Timestamps (created, paid, expired)"
          },
          "response": []
        },
        {
          "name": "5. Get Payments by Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/payments/subscription/:subscriptionId",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "payments", "subscription", ":subscriptionId"],
              "variable": [
                {
                  "key": "subscriptionId",
                  "value": "subscription-uuid-here",
                  "description": "Subscription ID"
                }
              ]
            },
            "description": "**Get payment history untuk specific subscription**\n\n**Use Case:**\n- Lihat riwayat pembayaran subscription\n- Track payment attempts (success/failed)\n- Audit trail pembayaran\n\n**Response:**\nArray of payments untuk subscription tersebut, sorted by createdAt desc."
          },
          "response": []
        },
        {
          "name": "6. Cancel Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/superadmin/payments/:id/cancel",
              "host": ["{{base_url}}"],
              "path": ["superadmin", "payments", ":id", "cancel"],
              "variable": [
                {
                  "key": "id",
                  "value": "payment-uuid-here",
                  "description": "Payment ID"
                }
              ]
            },
            "description": "**Cancel pending payment**\n\n**Business Rules:**\n- Hanya bisa cancel payment dengan status PENDING\n- Throw error jika status sudah SUCCESS/FAILED/etc\n\n**Actions:**\n- Status ‚Üí CANCELLED\n- Subscription tetap PENDING (bisa create payment baru)\n\n**Use Case:**\n- User batalkan pembayaran\n- Payment method berubah\n- User mau coba payment method lain"
          },
          "response": []
        }
      ],
      "description": "**Payment Management untuk Subscription**\n\n**Payment Flow:**\n1. üìã Create Subscription ‚Üí Status: PENDING\n2. üí≥ Create Payment ‚Üí Status: PENDING, expires 24h\n3. ‚úÖ Process Payment (Mock) ‚Üí Payment: SUCCESS, Subscription: ACTIVE\n\n**Mock Payment Gateway:**\n- Untuk development/testing\n- Simulasi payment success tanpa payment gateway real\n- Nanti replace dengan webhook dari Midtrans/Xendit\n\n**Payment Methods Supported:**\n- Bank Transfer\n- Credit Card\n- E-Wallet (GoPay, OVO, Dana)\n- Virtual Account\n\n**Ready for Integration:**\n- üîú Midtrans integration\n- üîú Xendit integration\n- üîú Webhook handler\n- üîú Payment proof upload (manual transfer)"
    }
  ]
}
